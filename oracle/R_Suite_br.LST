SQL> DECLARE
  2  BEGIN
  3  
  4    Utils.Clear_Log;
  5    UT_Utils.Run_Suite (UT_Utils.c_ut_suite_bren);
  6  
  7  EXCEPTION
  8    WHEN OTHERS THEN
  9      Utils.Write_Other_Error;
 10  END;
 11  /

PL/SQL procedure successfully completed.

SQL> @L_Log_Default

TEXT
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

UNIT TEST for UT_Emp_WS.ut_AIP_Save_Emps
========================================

SCENARIO 1: 1 valid record {
============================

     GROUP Employee: Actual = 1, Expected = 1 {
     ==========================================

          F?  Employee id  Name  Email  Job      Salary
          --  -----------  ----  -----  -------  ------
                     1488  LN 1  EM 1   IT_PROG    1000

     } 0 failed, of 1: SUCCESS
     =========================

     GROUP Output array: Actual = 1, Expected = 1 {
     ==============================================

          F?  Employee id  Description
          --  -----------  --------------------------------------
                     1488  ONE THOUSAND FOUR HUNDRED EIGHTY-EIGHT

     } 0 failed, of 1: SUCCESS
     =========================

     GROUP Exception: Actual = 0, Expected = 0: SUCCESS
     ==================================================

} 0 failed, of 3: SUCCESS
=========================

SCENARIO 2: 1 invalid job id {
==============================

     GROUP Employee: Actual = 0, Expected = 0: SUCCESS
     =================================================

     GROUP Output array: Actual = 1, Expected = 1 {
     ==============================================

          F?  Employee id  Description
          --  -----------  -------------------------------------------------------------------
                        0  ORA-02291: integrity constraint (.) violated - parent key not found

     } 0 failed, of 1: SUCCESS
     =========================

     GROUP Exception: Actual = 0, Expected = 0: SUCCESS
     ==================================================

} 0 failed, of 3: SUCCESS
=========================

SCENARIO 3: 1 invalid number {
==============================

     GROUP Employee: Actual = 0, Expected = 0: SUCCESS
     =================================================

     GROUP Output array: Actual = 0, Expected = 0: SUCCESS
     =====================================================

     GROUP Exception: Actual = 1, Expected = 1 {
     ===========================================

          F?  Error message
          --  -------------------------------------------------------------------------------
              ORA-06502: PL/SQL: numeric or value error: character to number conversion error

     } 0 failed, of 1: SUCCESS
     =========================

} 0 failed, of 3: SUCCESS
=========================

SCENARIO 4: 2 valid records, 1 invalid job id {
===============================================

     GROUP Employee: Actual = 2, Expected = 3 {
     ==========================================

          F?  Employee id  Name  Email  Job      Salary
          --  -----------  ----  -----  -------  ------
          F          1490  LN 4  EM 4   IT_PROG    3000
          >          1490  LN 4  EM 4   IT_PROG    1000
                     1492  LN 6  EM 6   IT_PROG    5000
          F
          >          1492  LN 6  EM 6   IT_PROG    5000

     } 2 failed, of 3: FAILURE
     =========================

     GROUP Output array: Actual = 3, Expected = 3 {
     ==============================================

          F?  Employee id  Description
          --  -----------  -------------------------------------------------------------------
                     1490  ONE THOUSAND FOUR HUNDRED NINETY
                        0  ORA-02291: integrity constraint (.) violated - parent key not found
                     1492  ONE THOUSAND FOUR HUNDRED NINETY-TWO

     } 0 failed, of 3: SUCCESS
     =========================

     GROUP Exception: Actual = 0, Expected = 0: SUCCESS
     ==================================================

} 2 failed, of 7: FAILURE
=========================

TIMING: Actual = 4, Expected <= 2: FAILURE
==========================================

SUMMARY for UT_Emp_WS.ut_AIP_Save_Emps
======================================

Scenario                           # Failed  # Tests  Status
---------------------------------  --------  -------  -------
1 valid record                            0        3  SUCCESS
1 invalid job id                          0        3  SUCCESS
1 invalid number                          0        3  SUCCESS
2 valid records, 1 invalid job id         2        7  FAILURE
Timing                                    1        1  FAILURE
---------------------------------  --------  -------  -------
Total                                     3       17  FAILURE
---------------------------------  --------  -------  -------

Timer Set: UT_Emp_WS.ut_AIP_Save_Emps, Constructed at 25 Jun 2016 16:10:48, written at 16:10:48
===============================================================================================
[Timer timed: Elapsed (per call): 0.01 (0.000013), CPU (per call): 0.01 (0.000010), calls: 1000, '***' denotes corrected line below]

Timer       Elapsed         CPU         Calls       Ela/Call       CPU/Call
-------  ----------  ----------  ------------  -------------  -------------
Setup          0.03        0.03             1        0.02800        0.03000
Caller         0.01        0.00             3        0.00433        0.00000
SELECT         0.01        0.02             3        0.00233        0.00667
(Other)        0.03        0.03             1        0.02900        0.03000
-------  ----------  ----------  ------------  -------------  -------------
Total          0.08        0.08             8        0.00963        0.01000
-------  ----------  ----------  ------------  -------------  -------------

UNIT TEST for UT_View_Drivers.ut_HR_Test_View_V
===============================================

SCENARIO 1: DS-1, testing inner, outer joins, analytic over dep, and global ratios with 1 dep, Employees created in setup: DS-1 - 4 emps, 1 dep (10), emp-3 has no dep, emp-4 has bad job
=========================================================================================================================================================================================

#  Employee id  Department id     Manager  Job id          Salary
-  -----------  -------------  ----------  ----------  ----------
1         1493             10              IT_PROG           1000
2         1494             10        1493  IT_PROG           2000
3         1495                       1493  IT_PROG           3000
4         1496             10        1493  AD_ASST           4000

SCENARIO 2: DS-2, testing same as 1 but with extra emp in another dep, Employees created in setup: DS-2 - As dataset 1 but with extra emp-5, in second dep (20)
===============================================================================================================================================================

#  Employee id  Department id     Manager  Job id          Salary
-  -----------  -------------  ----------  ----------  ----------
1         1497             10              IT_PROG           1000
2         1498             10        1497  IT_PROG           2000
3         1499                       1497  IT_PROG           3000
4         1500             10        1497  AD_ASST           4000
5         1501             20        1497  IT_PROG           5000

SCENARIO 3: DS-2, passing 'WHERE dep=10', Employees created in setup: DS-2 - As dataset 1 but with extra emp-5, in second dep (20)
==================================================================================================================================

#  Employee id  Department id     Manager  Job id          Salary
-  -----------  -------------  ----------  ----------  ----------
1         1502             10              IT_PROG           1000
2         1503             10        1502  IT_PROG           2000
3         1504                       1502  IT_PROG           3000
4         1505             10        1502  AD_ASST           4000
5         1506             20        1502  IT_PROG           5000

SCENARIO 4: DS-3, Salaries total 1500 (< threshold of 1600), Employees created in setup: DS-3 - As dataset 2 but with salaries * 0.1, total below reporting threshold of 1600
=============================================================================================================================================================================

#  Employee id  Department id     Manager  Job id          Salary
-  -----------  -------------  ----------  ----------  ----------
1         1507             10              IT_PROG            100
2         1508             10        1507  IT_PROG            200
3         1509                       1507  IT_PROG            300
4         1510             10        1507  AD_ASST            400
5         1511             20        1507  IT_PROG            500

SCENARIO 1: DS-1, testing inner, outer joins, analytic over dep, and global ratios with 1 dep {
===============================================================================================

     GROUP Select results: Actual = 2, Expected = 2 {
     ================================================

          F?  Name  Department      Manager  Salary  Salary Ratio (dep)  Salary Ratio (overall)
          --  ----  --------------  -------  ------  ------------------  ----------------------
              LN_1  Administration             1000                 .67                      .4
              LN_2  Administration  LN_1       2000                1.33                      .8

     } 0 failed, of 2: SUCCESS
     =========================

} 0 failed, of 2: SUCCESS
=========================

SCENARIO 2: DS-2, testing same as 1 but with extra emp in another dep {
=======================================================================

     GROUP Select results: Actual = 3, Expected = 3 {
     ================================================

          F?  Name  Department      Manager  Salary  Salary Ratio (dep)  Salary Ratio (overall)
          --  ----  --------------  -------  ------  ------------------  ----------------------
              LN_1  Administration             1000                 .67                     .33
              LN_2  Administration  LN_1       2000                1.33                     .67
              LN_5  Marketing       LN_1       5000                   1                    1.67

     } 0 failed, of 3: SUCCESS
     =========================

} 0 failed, of 3: SUCCESS
=========================

SCENARIO 3: DS-2, passing 'WHERE dep=10' {
==========================================

     GROUP Select results: Actual = 2, Expected = 2 {
     ================================================

          F?  Name  Department      Manager  Salary  Salary Ratio (dep)  Salary Ratio (overall)
          --  ----  --------------  -------  ------  ------------------  ----------------------
              LN_1  Administration             1000                 .67                     .33
              LN_2  Administration  LN_1       2000                1.33                     .67

     } 0 failed, of 2: SUCCESS
     =========================

} 0 failed, of 2: SUCCESS
=========================

SCENARIO 4: DS-3, Salaries total 1500 (< threshold of 1600) {
=============================================================

     GROUP Select results: Actual = 0, Expected = 0: SUCCESS
     =======================================================

} 0 failed, of 1: SUCCESS
=========================

TIMING: Actual = 11, Expected <= 1: FAILURE
===========================================

SUMMARY for UT_View_Drivers.ut_HR_Test_View_V
=============================================

Scenario                                                                           # Failed  # Tests  Status
---------------------------------------------------------------------------------  --------  -------  -------
DS-1, testing inner, outer joins, analytic over dep, and global ratios with 1 dep         0        2  SUCCESS
DS-2, testing same as 1 but with extra emp in another dep                                 0        3  SUCCESS
DS-2, passing 'WHERE dep=10'                                                              0        2  SUCCESS
DS-3, Salaries total 1500 (< threshold of 1600)                                           0        1  SUCCESS
Timing                                                                                    1        1  FAILURE
---------------------------------------------------------------------------------  --------  -------  -------
Total                                                                                     1        9  FAILURE
---------------------------------------------------------------------------------  --------  -------  -------

Timer Set: UT_View_Drivers.ut_HR_Test_View_V, Constructed at 25 Jun 2016 16:10:48, written at 16:10:48
======================================================================================================
[Timer timed: Elapsed (per call): 0.01 (0.000013), CPU (per call): 0.01 (0.000010), calls: 1000, '***' denotes corrected line below]

Timer       Elapsed         CPU         Calls       Ela/Call       CPU/Call
-------  ----------  ----------  ------------  -------------  -------------
Setup          0.02        0.05             4        0.00400        0.01250
Caller         0.04        0.02             4        0.01050        0.00500
(Other)        0.01        0.00             1        0.01100        0.00000
-------  ----------  ----------  ------------  -------------  -------------
Total          0.07        0.07             9        0.00767        0.00778
-------  ----------  ----------  ------------  -------------  -------------

Suite Summary
=============

Package.Procedure                  Tests  Fails         ELA         CPU
---------------------------------  -----  -----  ----------  ----------
UT_Emp_WS.ut_AIP_Save_Emps            17      3        0.08        0.08
UT_View_Drivers.ut_HR_Test_View_V      9      1        0.07        0.07
---------------------------------  -----  -----  ----------  ----------
Total                                 26      4        0.15        0.15
---------------------------------  -----  -----  ----------  ----------
Others error in (): ORA-20001: Suite BRENDAN returned error status: ORA-06512: at "DP_6.UT_UTILS", line 142
ORA-06512: at "DP_6.UT_UTILS", line 627
ORA-06512: at line 5


291 rows selected.

SQL> SPOOL OFF
